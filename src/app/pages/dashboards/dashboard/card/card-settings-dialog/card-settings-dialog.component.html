<div class="flex flex-col" cdkDrag cdkDragRootElement=".cdk-overlay-pane">

    <div class="dialog-header" cdkDragHandle>
        <div class="text-lg text-white">
            Card settings
        </div>
        <button mat-icon-button (click)="cancel()">
            <mat-icon class="text-white">clear</mat-icon>
        </button>
    </div>

    <div class="dialog-content">

        <div class="flex flex-col gap-1">
            <mat-label>Card title</mat-label>
            <mat-form-field appearance="outline">
                <input matInput [(ngModel)]="dashboardCard.title">
            </mat-form-field>
        </div>

        @if (dataLoading) {
            <mat-progress-bar class="!absolute top-0 z-50" mode="indeterminate"></mat-progress-bar>
        } @else {
            <div class="flex flex-col">
                @for (setting of dashboardCardSettings; track $index) {
                    <div class="flex flex-col gap-1">
                        <mat-label>{{ setting.setting_id }}</mat-label>
                        <mat-form-field appearance="outline">
                            <mat-select matInput [(ngModel)]="setting.value">
                                @for (option of getSettingPossibleValues(setting); track $index) {
                                    <mat-option [value]="option">
                                        {{ option }}
                                    </mat-option>
                                }
                            </mat-select>
                        </mat-form-field>
                    </div>
                }
            </div>
        }

    </div>

    <div class="dialog-actions">

        <button mat-button (click)="restoreDefaults()">
            Restore defaults
        </button>

        <button mat-button (click)="cancel()">
            Cancel
        </button>

        <button mat-flat-button type="submit" (click)="update()" [disabled]="updateLoading">
            <div class="flex flex-row items-center gap-4">
                @if (updateLoading) { <mat-spinner [diameter]="24"></mat-spinner> }
                <div>Update</div>
            </div>
        </button>

    </div>

</div>
